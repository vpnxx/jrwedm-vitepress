"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),s=require("@ctrl/tinycolor"),v=require("@ant-design/colors"),B=e.defineComponent({__name:"ConfigProvider",props:{theme:{default:()=>({})},abstract:{type:Boolean,default:!0},tag:{default:"div"}},setup(p){const c=p,n=e.reactive({colorPalettes:[],shadowColor:""}),d=e.reactive({Alert:{colorPalettes:[],shadowColor:""},BackTop:{colorPalettes:[],shadowColor:""},Button:{colorPalettes:[],shadowColor:""},Calendar:{colorPalettes:[],shadowColor:""},Carousel:{colorPalettes:[],shadowColor:""},Checkbox:{colorPalettes:[],shadowColor:""},ColorPicker:{colorPalettes:[],shadowColor:""},DatePicker:{colorPalettes:[],shadowColor:""},FloatButton:{colorPalettes:[],shadowColor:""},Image:{colorPalettes:[],shadowColor:""},Input:{colorPalettes:[],shadowColor:""},InputNumber:{colorPalettes:[],shadowColor:""},InputSearch:{colorPalettes:[],shadowColor:""},LoadingBar:{colorPalettes:[],shadowColor:""},Message:{colorPalettes:[],shadowColor:""},Modal:{colorPalettes:[],shadowColor:""},Notification:{colorPalettes:[],shadowColor:""},Pagination:{colorPalettes:[],shadowColor:""},Popconfirm:{colorPalettes:[],shadowColor:""},Progress:{colorPalettes:[],shadowColor:""},Radio:{colorPalettes:[],shadowColor:""},Select:{colorPalettes:[],shadowColor:""},Slider:{colorPalettes:[],shadowColor:""},Spin:{colorPalettes:[],shadowColor:""},Steps:{colorPalettes:[],shadowColor:""},Swiper:{colorPalettes:[],shadowColor:""},Switch:{colorPalettes:[],shadowColor:""},Tabs:{colorPalettes:[],shadowColor:""},Textarea:{colorPalettes:[],shadowColor:""},TextScroll:{colorPalettes:[],shadowColor:""},Upload:{colorPalettes:[],shadowColor:""}});e.provide("common",n),e.provide("components",d);const h=e.computed(()=>"common"in c.theme?c.theme.common:null),g=e.computed(()=>{const o={...c.theme};return"common"in o&&delete o.common,o});e.watch(h,o=>{const t=C(o?.primaryColor||"#1677ff");n.colorPalettes=t,n.shadowColor=u(t[0])},{immediate:!0}),e.watch(g,o=>{Object.keys(o).forEach(t=>{const a=o[t]?.primaryColor||h.value?.primaryColor||"#1677ff",l=C(a);d[t].colorPalettes=l,d[t].shadowColor=u(l[0])})},{immediate:!0});function C(o){return v.generate(o)}function i(o){return o>=0&&o<=255}function u(o,t="#ffffff"){const{r:a,g:l,b:m,a:b}=new s.TinyColor(o).toRgb();if(b<1)return o;const{r:S,g:y,b:T}=new s.TinyColor(t).toRgb();for(let r=.01;r<=1;r+=.01){const w=Math.round((a-S*(1-r))/r),P=Math.round((l-y*(1-r))/r),f=Math.round((m-T*(1-r))/r);if(i(w)&&i(P)&&i(f))return new s.TinyColor({r:w,g:P,b:f,a:Math.round(r*100)/100}).toRgbString()}return new s.TinyColor({r:a,g:l,b:m,a:1}).toRgbString()}return(o,t)=>o.abstract?e.renderSlot(o.$slots,"default",{key:0}):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.tag),{key:1,class:"config-provider-wrap"},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"default")]),_:3}))}});exports.default=B;
