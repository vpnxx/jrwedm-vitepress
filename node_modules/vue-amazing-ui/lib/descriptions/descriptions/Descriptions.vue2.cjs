"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),B=require("../../utils/index.cjs"),F={key:0,class:"descriptions-header"},R={class:"descriptions-title"},T={class:"descriptions-extra"},z={key:0},D=["colspan"],M={key:1},O={key:0},$=["colspan"],W=["colspan"],j={key:1},A=e.defineComponent({__name:"Descriptions",props:{title:{default:void 0},extra:{default:void 0},bordered:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},size:{default:"default"},column:{default:()=>({xs:1,sm:2,md:3})},labelStyle:{default:()=>({})},contentStyle:{default:()=>({})}},setup(V){const r=V,v=e.ref(),k=e.ref(!0),u=e.ref(!0),i=e.ref(),y=e.ref(),E=e.ref(),b=e.ref(),h=e.ref(),S=e.ref(),_=e.ref(),c=e.ref([]),d=e.ref(window.innerWidth),g=B.useSlotsExist(["title","extra"]),N=e.computed(()=>g.title||g.extra||r.title||r.extra),p=e.computed(()=>typeof r.column=="object"?d.value>=1600&&r.column.xxl!==void 0?r.column.xxl:d.value>=1200&&r.column.xl!==void 0?r.column.xl:d.value>=992&&r.column.lg!==void 0?r.column.lg:d.value>=768&&r.column.md!==void 0?r.column.md:d.value>=576&&r.column.sm!==void 0?r.column.sm:d.value<576&&r.column.xs!==void 0?r.column.xs:1:r.column);e.watch(()=>[r.bordered,r.vertical,p.value,r.labelStyle,r.contentStyle],()=>{u.value||(u.value=!0),w()},{deep:!0}),B.useEventListener(window,"resize",L),B.useMutationObserver(v,l=>{u.value||(u.value=!0,l.some(t=>t.type==="childList")&&w())},{subtree:!0,childList:!0,attributes:!0}),e.onMounted(()=>{C()});function L(){d.value=window.innerWidth}async function w(){k.value=!k.value,await e.nextTick(),C()}function f(l){return l.reduce((o,t)=>o+t.span,0)}async function C(){if(i.value=Array.from(v.value.children).filter(l=>l.className===(r.bordered?"descriptions-item-bordered":"descriptions-item")),c.value.length&&(c.value=[],await e.nextTick()),i.value&&i.value.length){const l=i.value.length;let o=[];for(let t=0;t<l;t++){const n={span:Math.min(i.value[t].dataset.span??1,p.value),element:i.value[t]};f(o)<p.value?(n.span=Math.min(n.span,p.value-f(o)),o.push(n)):(c.value.push(o),o=[n])}if(!r.vertical&&!i.value[l-1].dataset.span&&f(o)<p.value){const t=o.length;o[t-1].span=o[t-1].span+p.value-f(o)}c.value.push(o),await e.nextTick(),x()}else u.value=!1}async function x(){r.bordered?c.value.forEach((l,o)=>{l.forEach(t=>{const n=Array.from(t.element.children),a=n[0];m(a,r.labelStyle);const s=n[1];m(s,r.contentStyle),r.vertical?(a.colSpan=t.span,s.colSpan=t.span,S.value[o].appendChild(a),_.value[o].appendChild(s)):(a.colSpan=1,s.colSpan=t.span*2-1,h.value[o].appendChild(a),h.value[o].appendChild(s))})}):i.value.forEach((l,o)=>{const t=Array.from(l.children),n=t[0];m(n,r.labelStyle);const a=t[1];m(a,r.contentStyle),r.vertical?(E.value[o].appendChild(l.firstChild),b.value[o].appendChild(l.lastChild)):y.value[o].appendChild(l)}),await e.nextTick(),u.value=!1}function m(l,o){JSON.stringify(o)!=="{}"&&Object.keys(o).forEach(t=>{l.style[t]||(l.style[t]=o[t])})}return(l,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["descriptions-wrap",`descriptions-${l.size}`])},[N.value?(e.openBlock(),e.createElementBlock("div",F,[e.createElementVNode("div",R,[e.renderSlot(l.$slots,"title",{},()=>[e.createTextVNode(e.toDisplayString(l.title),1)],!0)]),e.createElementVNode("div",T,[e.renderSlot(l.$slots,"extra",{},()=>[e.createTextVNode(e.toDisplayString(l.extra),1)],!0)])])):e.createCommentVNode("",!0),l.vertical?(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["descriptions-view",{"descriptions-bordered":l.bordered}])},[e.createElementVNode("table",null,[l.bordered?(e.openBlock(),e.createElementBlock("tbody",j,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value.length,t=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:t},[e.createElementVNode("tr",{ref_for:!0,ref_key:"thVerticalBorderedRows",ref:S,class:"descriptions-bordered-tr"},null,512),e.createElementVNode("tr",{ref_for:!0,ref_key:"tdVerticalBorderedRows",ref:_,class:"descriptions-bordered-tr"},null,512)],64))),128))])):(e.openBlock(),e.createElementBlock("tbody",O,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n},[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(a,s)=>(e.openBlock(),e.createElementBlock("th",{class:"descriptions-item-th",colspan:a.span,key:s},[e.createElementVNode("div",{ref_for:!0,ref_key:"thVerticalCols",ref:E,class:"descriptions-item"},null,512)],8,$))),128))]),e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(a,s)=>(e.openBlock(),e.createElementBlock("td",{class:"descriptions-item-td",colspan:a.span,key:s},[e.createElementVNode("div",{ref_for:!0,ref_key:"tdVerticalCols",ref:b,class:"descriptions-item"},null,512)],8,W))),128))])],64))),128))]))])],2)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["descriptions-view",{"descriptions-bordered":l.bordered}])},[e.createElementVNode("table",null,[l.bordered?(e.openBlock(),e.createElementBlock("tbody",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value.length,t=>(e.openBlock(),e.createElementBlock("tr",{ref_for:!0,ref_key:"trBorderedRows",ref:h,class:"descriptions-bordered-tr",key:t}))),128))])):(e.openBlock(),e.createElementBlock("tbody",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(t,n)=>(e.openBlock(),e.createElementBlock("tr",{key:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(a,s)=>(e.openBlock(),e.createElementBlock("td",{ref_for:!0,ref_key:"tdCols",ref:y,class:"descriptions-item-td",colspan:a.span,key:s},null,8,D))),128))]))),128))]))])],2)),e.withDirectives(e.createElementVNode("div",{ref_key:"defaultSlotsRef",ref:v},[k.value?e.renderSlot(l.$slots,"default",{key:0},void 0,!0):e.renderSlot(l.$slots,"default",{key:1},void 0,!0)],512),[[e.vShow,!1]])],2))}});exports.default=A;
